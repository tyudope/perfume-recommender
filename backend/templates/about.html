<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>About the Algorithm ‚Äì Perfume Recommender</title>
  <link rel="stylesheet" href="/static/style.css?v=3"/>
</head>
<body>
  <div class="container">
    <h1 class="title">üß† About the Algorithm</h1>
    <p class="subtitle">How we turn your inputs into high-quality perfume recommendations.</p>

    <h2>Data</h2>
    <ul>
      <li>Dataset: ~69k perfumes (Fragrantica-derived), with <b>brand, name, gender, price range (PLN), main accords, longevity, sillage, rating value, rating count, URL</b>.</li>
      <li>Gender is inferred from the dataset, name, and description (robust normalization).</li>
      <li>Empty/unused columns removed for performance and clarity.</li>
    </ul>

    <h2>Ranking Model (Hybrid)</h2>
    <p>For each candidate perfume, we compute a composite score:</p>
    <pre style="white-space:pre-wrap;background:#fff;padding:10px;border-radius:8px;border:1px solid #e7dfd3;">
score =
  0.40 * content_similarity
+ 0.15 * usecase_match
+ 0.15 * (longevity / 5)
+ 0.20 * (rating_value / 5)
+ 0.10 * min(rating_count / 2000, 1)
(+ optional small bonus to Male/Female if no gender filter selected)
    </pre>
    <ul>
      <li><b>content_similarity</b>: semantic match between your liked perfumes / note keywords and each perfume‚Äôs text (TF-IDF / vector search).</li>
      <li><b>usecase_match</b>: heuristic overlap between accords and selected use-cases.</li>
      <li><b>longevity/sillage</b>: performance preference (1‚Äì5 scale).</li>
      <li><b>ratings</b>: community quality and popularity signals.</li>
    </ul>

    <h2>Filters</h2>
    <ul>
      <li>Price range, ratings, longevity, sillage, gender (strict: selected gender + Unisex; otherwise soft bonus to Male/Female).</li>
      <li>Liked perfumes are excluded from results to promote discovery.</li>
    </ul>

    <h2>AI Reasoning</h2>
    <ul>
      <li>Optional ‚ÄúAI says‚Äù explanation for the top results (capped to control cost).</li>
      <li>Summarizes why the perfume matches your inputs in simple, human terms.</li>
    </ul>

    <h2>Performance & Safety</h2>
    <ul>
      <li>Server-side caps: max <b>10</b> results per query; AI reasoning for up to <b>5</b> results.</li>
      <li>Popularity-weighted sampling applied on huge candidate sets to keep latency low.</li>
      <li>Environment-based config; API keys are never exposed in the client.</li>
    </ul>

    <h2>Future Enhancements</h2>
    <ul>
      <li>Embeddings/FAISS for deeper semantic search.</li>
      <li>User profile vector for personalization.</li>
      <li>Clustering/UMAP visualization of the scent space.</li>
      <li>Model-learned weights (MAP@K/NDCG optimization).</li>
    </ul>

    <div style="margin-top:28px;">
      <a class="btn" href="/">‚Üê Back to Recommender</a>
      <a class="btn btn-secondary" href="/intro">How to use ‚Üí</a>
    </div>
  </div>
</body>
</html>